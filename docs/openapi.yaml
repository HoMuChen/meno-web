openapi: 3.0.0
info:
  title: Meno API
  version: 1.0.0
  description: >-
    RESTful API built with Express, MongoDB, and clean architecture principles. This API provides endpoints for
    authentication (email/password and Google OAuth), user management, and file storage with support for multiple
    storage providers (local and Google Cloud Storage).
  contact:
    name: API Support
  license:
    name: ISC
    url: https://opensource.org/licenses/ISC
servers:
  - url: http://localhost:6001
    description: Development server
tags:
  - name: Health
    description: Health check and monitoring endpoints
  - name: Auth
    description: Authentication endpoints (signup, login, OAuth)
  - name: Users
    description: User management endpoints
  - name: Files
    description: File storage and management endpoints
  - name: Projects
    description: Project management endpoints for organizing meetings
  - name: Meetings
    description: Meeting management endpoints with audio upload and transcription
  - name: Transcriptions
    description: Transcription management endpoints for viewing and editing meeting transcripts
  - name: People
    description: Person management endpoints
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT authorization header using the Bearer scheme
  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          description: Error message describing what went wrong
          example: An error occurred
        error:
          type: object
          description: Detailed error information
          properties:
            code:
              type: string
              description: Error code
              example: VALIDATION_ERROR
            details:
              type: object
              description: Additional error details
              additionalProperties: true
    ValidationError:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Validation failed
        errors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                description: Field that failed validation
                example: email
              message:
                type: string
                description: Validation error message
                example: Email is required
    ActionItem:
      type: object
      required:
        - meetingId
        - userId
        - task
      properties:
        _id:
          type: string
          description: Auto-generated action item ID
        meetingId:
          type: string
          description: Parent meeting ID
        userId:
          type: string
          description: User ID who owns the meeting (denormalized for efficient querying)
        personId:
          type: string
          description: Optional person ID if assignee was matched to a person
        task:
          type: string
          description: Description of the action item
          maxLength: 500
        assignee:
          type: string
          description: Assignee name as extracted by LLM (may not match personId)
          maxLength: 100
        dueDate:
          type: string
          format: date-time
          description: Due date or deadline as ISO 8601 datetime
        context:
          type: string
          description: Additional context or related discussion point
          maxLength: 500
        status:
          type: string
          enum:
            - pending
            - in_progress
            - completed
          description: Current status of the action item
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    File:
      type: object
      required:
        - filename
        - path
        - size
      properties:
        _id:
          type: string
          description: Auto-generated file ID
        filename:
          type: string
          description: Original filename
        path:
          type: string
          description: Storage path
        url:
          type: string
          description: Accessible URL
        size:
          type: number
          description: File size in bytes
        mimeType:
          type: string
          description: MIME type
        uploadedBy:
          type: string
          description: User ID who uploaded the file
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Meeting:
      type: object
      required:
        - title
        - projectId
        - audioFile
        - recordingType
      properties:
        _id:
          type: string
          description: Auto-generated meeting ID
        title:
          type: string
          description: Meeting title
          minLength: 2
          maxLength: 200
        description:
          type: string
          description: Meeting description
          maxLength: 1000
        summary:
          type: string
          description: AI-generated meeting summary with Overview, Key Points, Conclusion, and Action Items
        projectId:
          type: string
          description: Parent project ID
        audioFile:
          type: string
          description: Audio file path or URL
        duration:
          type: number
          description: Audio duration in seconds
        recordingType:
          type: string
          enum:
            - upload
            - direct
          description: How the meeting was created
        transcriptionStatus:
          type: string
          enum:
            - pending
            - processing
            - completed
            - failed
          description: Current transcription status
        transcriptionProgress:
          type: number
          description: Transcription progress (0-100)
        metadata:
          type: object
          properties:
            fileSize:
              type: number
            mimeType:
              type: string
            originalName:
              type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Person:
      type: object
      required:
        - name
        - userId
      properties:
        _id:
          type: string
          description: Auto-generated person ID
        name:
          type: string
          description: Person's full name
          minLength: 2
          maxLength: 100
        email:
          type: string
          format: email
          description: Person's email (optional)
        phone:
          type: string
          description: Person's phone number (optional)
          maxLength: 20
        company:
          type: string
          description: Company or organization
          maxLength: 100
        socialMedia:
          type: object
          properties:
            linkedin:
              type: string
              format: uri
              description: LinkedIn profile URL
            twitter:
              type: string
              format: uri
              description: Twitter profile URL
            facebook:
              type: string
              format: uri
              description: Facebook profile URL
            instagram:
              type: string
              format: uri
              description: Instagram profile URL
            github:
              type: string
              format: uri
              description: GitHub profile URL
        notes:
          type: string
          description: Additional notes about the person
          maxLength: 1000
        userId:
          type: string
          description: Owner user ID
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Project:
      type: object
      required:
        - name
        - userId
      properties:
        _id:
          type: string
          description: Auto-generated project ID
        name:
          type: string
          description: Project name
          minLength: 2
          maxLength: 100
        description:
          type: string
          description: Project description
          maxLength: 500
        userId:
          type: string
          description: Owner user ID
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    TierConfig:
      type: object
      required:
        - name
        - displayName
        - limits
      properties:
        _id:
          type: string
          description: Auto-generated tier ID
        name:
          type: string
          enum:
            - free
            - plus
            - pro
          description: Unique tier identifier
        displayName:
          type: string
          description: Human-readable tier name
        limits:
          type: object
          properties:
            monthlyDuration:
              type: number
              description: Monthly audio duration limit in seconds (-1 for unlimited)
            maxFileSize:
              type: number
              description: Maximum file size in bytes
        features:
          type: array
          items:
            type: string
          description: Array of feature flags enabled for this tier
        price:
          type: number
          description: Monthly price in cents (0 for free tier)
        isActive:
          type: boolean
          description: Whether this tier is currently available
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Transcription:
      type: object
      required:
        - meetingId
        - startTime
        - endTime
        - speaker
        - text
      properties:
        _id:
          type: string
          description: Auto-generated transcription ID
        meetingId:
          type: string
          description: Parent meeting ID
        startTime:
          type: number
          description: Start time in milliseconds from audio start
        endTime:
          type: number
          description: End time in milliseconds from audio start
        speaker:
          type: string
          description: Speaker identifier (e.g., "Speaker 1", "John Doe")
        personId:
          type: string
          description: Optional person ID if speaker is assigned to a person
        text:
          type: string
          description: Transcribed text segment
          maxLength: 5000
        isEdited:
          type: boolean
          description: Whether the transcription was manually edited
        createdAt:
          type: string
          format: date-time
    User:
      type: object
      required:
        - email
        - name
      properties:
        _id:
          type: string
          description: Auto-generated user ID
        email:
          type: string
          format: email
          description: User email (unique)
        name:
          type: string
          description: User full name
        password:
          type: string
          format: password
          description: User password (only for email/password auth)
        provider:
          type: string
          enum:
            - email
            - google
          description: Authentication provider
        googleId:
          type: string
          description: Google OAuth ID
        avatar:
          type: string
          description: Avatar file path
        status:
          type: string
          enum:
            - active
            - inactive
            - suspended
          description: User account status
        tier:
          type: string
          description: Reference to user's subscription tier
        tierStartDate:
          type: string
          format: date-time
          description: When the current tier started
        currentMonthUsage:
          type: object
          properties:
            duration:
              type: number
              description: Cached total duration used this month (seconds)
            lastReset:
              type: string
              format: date-time
              description: When the usage cache was last reset
            month:
              type: number
              description: Month this cache is for (1-12)
            year:
              type: number
              description: Year this cache is for
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
paths:
  /api/files:
    post:
      summary: Upload a file
      description: Upload a file to the storage provider (max 50MB)
      tags:
        - Files
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary
                  description: File to upload (max 50MB)
                uploadedBy:
                  type: string
                  description: User ID who is uploading the file
                  example: 507f1f77bcf86cd799439011
      responses:
        '201':
          description: File uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/File'
        '400':
          description: No file provided or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '413':
          description: File too large (max 50MB)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      summary: Get all files
      description: Retrieve a list of all files in the system
      tags:
        - Files
      responses:
        '200':
          description: List of files
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/File'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
  /api/files/{id}:
    get:
      summary: Get file by ID
      description: Retrieve file metadata by file ID
      tags:
        - Files
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: File ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: File details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/File'
        '400':
          description: Invalid file ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: File not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      summary: Delete file
      description: Delete a file from storage and database
      tags:
        - Files
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: File ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: File deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: File deleted successfully
        '400':
          description: Invalid file ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: File not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/files/{id}/download:
    get:
      summary: Download file
      description: Download a file by its ID
      tags:
        - Files
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: File ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: File download
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '400':
          description: Invalid file ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: File not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/files/{id}/url:
    get:
      summary: Get file URL
      description: Get the accessible URL for a file
      tags:
        - Files
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: File ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
        - in: query
          name: expiresIn
          schema:
            type: integer
            default: 3600
      responses:
        '200':
          description: File URL
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      url:
                        type: string
                        description: Accessible file URL
                        example: http://localhost:3000/files/1234567890.png
        '400':
          description: Invalid file ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: File not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/health:
    get:
      summary: Health check endpoint
      description: Returns the health status of the API server
      tags:
        - Health
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Server is healthy
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00.000Z'
                  uptime:
                    type: number
                    description: Server uptime in seconds
                    example: 3600
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/health/ready:
    get:
      summary: Readiness check
      description: Returns the readiness status including database connectivity
      tags:
        - Health
      responses:
        '200':
          description: Service is ready
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Server is ready
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00.000Z'
                  database:
                    type: object
                    properties:
                      connected:
                        type: boolean
                        example: true
                      status:
                        type: string
                        example: connected
        '503':
          description: Server not ready (database connection issues)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Database not connected
                  database:
                    type: object
                    properties:
                      connected:
                        type: boolean
                        example: false
                      status:
                        type: string
                        example: disconnected
  /api/projects/{projectId}/transcriptions/search-all:
    get:
      summary: Search transcriptions across all meetings in a project
      description: Semantic search across all meetings in a project using AI embeddings
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: query
          name: q
          required: true
          schema:
            type: string
            maxLength: 200
          description: Search query (finds semantically similar content across all meetings)
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
          description: Results per page
        - in: query
          name: scoreThreshold
          schema:
            type: number
            minimum: 0
            maximum: 1
            default: 0.7
          description: Minimum similarity score (0-1)
        - in: query
          name: from
          schema:
            type: string
            format: date
          description: Filter meetings created after this date (ISO 8601)
        - in: query
          name: to
          schema:
            type: string
            format: date
          description: Filter meetings created before this date (ISO 8601)
        - in: query
          name: personId
          schema:
            type: string
          description: Filter by person ID
        - in: query
          name: groupByMeeting
          schema:
            type: boolean
            default: true
          description: Group results by meeting (true) or return flat list (false)
      responses:
        '200':
          description: Search results retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      results:
                        type: array
                        description: Search results grouped by meeting or flat list
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                      searchType:
                        type: string
                        example: semantic_cross_meeting
                      meetingsSearched:
                        type: integer
        '400':
          description: Invalid search query or embedding service not configured
        '401':
          description: Unauthorized
        '403':
          description: Not authorized to access this project
        '404':
          description: Project not found
  /api/projects/{projectId}/meetings:
    post:
      summary: Create a new meeting with audio file
      description: Upload audio file and create a meeting record
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - audioFile
                - title
              properties:
                audioFile:
                  type: string
                  format: binary
                  description: Audio file (MP3, WAV, M4A, WebM, OGG - max 100MB)
                title:
                  type: string
                  minLength: 2
                  maxLength: 200
                  example: Weekly Team Standup
                recordingType:
                  type: string
                  enum:
                    - upload
                    - direct
                  default: upload
                duration:
                  type: number
                  format: float
                  description: Audio duration in seconds (optional, calculated from file if not provided)
                  example: 125.5
      responses:
        '201':
          description: Meeting created successfully
        '400':
          description: Validation error or invalid file
        '401':
          description: Unauthorized
        '404':
          description: Project not found
    get:
      summary: Get meetings in a project
      description: Retrieve paginated list of meetings for a project
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: sort
          schema:
            type: string
            default: '-createdAt'
      responses:
        '200':
          description: Meetings retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Project not found
  /api/projects/{projectId}/meetings/{id}:
    get:
      summary: Get meeting by ID
      description: Retrieve specific meeting details
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '200':
          description: Meeting retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
    put:
      summary: Update meeting
      description: Update meeting title and/or move meeting to a different project
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 2
                  maxLength: 200
                  description: New meeting title
                projectId:
                  type: string
                  pattern: ^[0-9a-fA-F]{24}$
                  description: New project ID to move the meeting to (user must own the project)
      responses:
        '200':
          description: Meeting updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found or new project not found
    delete:
      summary: Delete meeting
      description: Delete meeting, audio file, and all transcriptions
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '200':
          description: Meeting deleted successfully
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/transcribe:
    post:
      summary: Start transcription for meeting
      description: Begin async transcription process for meeting audio
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '202':
          description: Transcription started successfully
        '400':
          description: Meeting already transcribed or in progress
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/download:
    get:
      summary: Download meeting audio file
      description: Download the original audio file for a meeting
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '200':
          description: Audio file downloaded successfully
          content:
            audio/mpeg:
              schema:
                type: string
                format: binary
            audio/wav:
              schema:
                type: string
                format: binary
            audio/mp4:
              schema:
                type: string
                format: binary
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/status:
    get:
      summary: Get transcription status
      description: Check transcription progress and status
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '200':
          description: Status retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/summary/stream:
    post:
      summary: Generate meeting summary with streaming
      description: |
        Stream AI-generated meeting summary with real-time updates.
        Summary includes Overview, Key Points, Conclusion, and Action Items sections.

        IMPORTANT REQUIREMENTS:
        - Summary is in MARKDOWN FORMAT with proper headings (##) and bullet points (-)
        - Summary is generated in the SAME LANGUAGE as the meeting transcription
        - For example, if transcription is in Chinese, the summary will be in Chinese

        Saves to database when complete.
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '200':
          description: Streaming response with Server-Sent Events
          content:
            text/event-stream:
              schema:
                type: string
                description: |
                  SSE stream with JSON events:
                  - {"type":"connected","meetingId":"..."}
                  - {"type":"chunk","content":"markdown text"}
                  - {"type":"complete"}
                  - {"type":"error","message":"..."}

                  Summary is in MARKDOWN FORMAT with the following sections:

                  ## Overview
                  Brief overview of meeting discussion

                  ## Key Points
                  - Main topics and decisions

                  ## Conclusion
                  Final outcomes and agreements

                  ## Action Items
                  - Tasks with responsibilities

                  Notes:
                  - All content is in MARKDOWN FORMAT (## for headings, - for bullet points)
                  - Summary is generated in the same language as the transcription
        '400':
          description: Transcription not completed
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/action-items/generate:
    post:
      summary: Generate action items for meeting
      description: |
        Generate action items from meeting transcription using AI.
        Returns immediately with 202 status while processing in background.
        Client should poll meeting status to check completion.

        Action items include:
        - task: What needs to be done
        - assignee: Person responsible (matched from transcript speakers)
        - dueDate: When it should be completed
        - context: Additional context from the meeting
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '202':
          description: Action items generation started
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Action items generation started
                  actionItemsStatus:
                    type: string
                    enum:
                      - processing
                    example: processing
                  actionItemsProgress:
                    type: number
                    example: 0
        '400':
          description: Transcription not completed or already processing
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/action-items:
    get:
      summary: List action items for meeting
      description: Get paginated list of action items generated for this meeting
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
          description: Items per page
        - in: query
          name: sort
          schema:
            type: string
            default: createdAt
          description: Sort field
      responses:
        '200':
          description: Action items retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  actionItems:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        meetingId:
                          type: string
                        personId:
                          type: string
                          nullable: true
                        task:
                          type: string
                        assignee:
                          type: string
                          nullable: true
                        dueDate:
                          type: string
                          nullable: true
                        context:
                          type: string
                          nullable: true
                        status:
                          type: string
                          enum:
                            - pending
                            - in_progress
                            - completed
                        createdAt:
                          type: string
                          format: date-time
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      limit:
                        type: integer
                      totalPages:
                        type: integer
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/projects/{projectId}/meetings/{id}/action-items/{actionItemId}:
    patch:
      summary: Update an action item
      description: Update fields of a specific action item
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: actionItemId
          required: true
          schema:
            type: string
          description: Action Item ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                task:
                  type: string
                  maxLength: 500
                assignee:
                  type: string
                  maxLength: 100
                personId:
                  type: string
                dueDate:
                  type: string
                  maxLength: 100
                context:
                  type: string
                  maxLength: 500
                status:
                  type: string
                  enum:
                    - pending
                    - in_progress
                    - completed
      responses:
        '200':
          description: Action item updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Action item not found
    delete:
      summary: Delete an action item
      description: Permanently delete a specific action item
      tags:
        - Meetings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
          description: Project ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: actionItemId
          required: true
          schema:
            type: string
          description: Action Item ID
      responses:
        '204':
          description: Action item deleted successfully
        '401':
          description: Unauthorized
        '404':
          description: Action item not found
  /api/people:
    post:
      summary: Create a new person
      description: Create a new person (client, member, friend, speaker)
      tags:
        - People
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  example: John Doe
                email:
                  type: string
                  format: email
                  example: john@example.com
                phone:
                  type: string
                  maxLength: 20
                  example: '+1234567890'
                company:
                  type: string
                  maxLength: 100
                  example: Acme Corporation
                socialMedia:
                  type: object
                  properties:
                    linkedin:
                      type: string
                      format: uri
                      example: https://linkedin.com/in/johndoe
                    twitter:
                      type: string
                      format: uri
                      example: https://twitter.com/johndoe
                    facebook:
                      type: string
                      format: uri
                      example: https://facebook.com/johndoe
                    instagram:
                      type: string
                      format: uri
                      example: https://instagram.com/johndoe
                    github:
                      type: string
                      format: uri
                      example: https://github.com/johndoe
                notes:
                  type: string
                  maxLength: 1000
                  example: Important client for Q4 project
      responses:
        '201':
          description: Person created successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
    get:
      summary: Get user's people
      description: Retrieve paginated list of people for authenticated user
      tags:
        - People
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Items per page
        - in: query
          name: sort
          schema:
            type: string
            default: name
          description: Sort field (prefix with - for descending)
      responses:
        '200':
          description: People retrieved successfully
        '401':
          description: Unauthorized
  /api/people/{id}:
    get:
      summary: Get person by ID
      description: Retrieve a specific person by their ID
      tags:
        - People
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Person ID
      responses:
        '200':
          description: Person retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Person not found
    put:
      summary: Update person
      description: Update person information
      tags:
        - People
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Person ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                email:
                  type: string
                  format: email
                phone:
                  type: string
                  maxLength: 20
                company:
                  type: string
                  maxLength: 100
                socialMedia:
                  type: object
                  properties:
                    linkedin:
                      type: string
                      format: uri
                    twitter:
                      type: string
                      format: uri
                    facebook:
                      type: string
                      format: uri
                    instagram:
                      type: string
                      format: uri
                    github:
                      type: string
                      format: uri
                notes:
                  type: string
                  maxLength: 1000
      responses:
        '200':
          description: Person updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Person not found
    delete:
      summary: Delete person
      description: Delete a person
      tags:
        - People
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Person ID
      responses:
        '200':
          description: Person deleted successfully
        '401':
          description: Unauthorized
        '404':
          description: Person not found
  /api/people/{id}/transcriptions:
    get:
      summary: Get person's transcriptions
      description: Retrieve all transcriptions for a person across all meetings with optional text search, ordered by creation date
      tags:
        - People
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Person ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
            maximum: 100
          description: Items per page
        - in: query
          name: sort
          schema:
            type: string
            default: '-createdAt'
          description: Sort field (prefix with - for descending, default is -createdAt)
        - in: query
          name: search
          schema:
            type: string
          description: Optional text search query to filter transcriptions by content
          example: project deadline
      responses:
        '200':
          description: Transcriptions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      transcriptions:
                        type: array
                        items:
                          type: object
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          pages:
                            type: integer
        '401':
          description: Unauthorized
        '404':
          description: Person not found
  /api/people/{id}/action-items:
    get:
      summary: Get person's action items
      description: Retrieve all action items assigned to a person across all meetings
      tags:
        - People
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Person ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
          description: Items per page
        - in: query
          name: sort
          schema:
            type: string
            default: createdAt
          description: Sort field (prefix with - for descending)
      responses:
        '200':
          description: Action items retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      actionItems:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                            meetingId:
                              type: object
                              properties:
                                _id:
                                  type: string
                                title:
                                  type: string
                                projectId:
                                  type: string
                            task:
                              type: string
                            assignee:
                              type: string
                              nullable: true
                            dueDate:
                              type: string
                              format: date-time
                              nullable: true
                            context:
                              type: string
                              nullable: true
                            status:
                              type: string
                              enum:
                                - pending
                                - in_progress
                                - completed
                            createdAt:
                              type: string
                              format: date-time
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          pages:
                            type: integer
        '401':
          description: Unauthorized
        '404':
          description: Person not found
  /api/projects:
    post:
      summary: Create a new project
      description: Create a new project for organizing meetings
      tags:
        - Projects
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  example: Q4 Product Planning
                description:
                  type: string
                  maxLength: 500
                  example: Quarterly planning meetings for product roadmap
      responses:
        '201':
          description: Project created successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
    get:
      summary: Get user's projects
      description: Retrieve paginated list of projects for authenticated user
      tags:
        - Projects
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Items per page
        - in: query
          name: sort
          schema:
            type: string
            default: '-createdAt'
          description: Sort field (prefix with - for descending)
      responses:
        '200':
          description: Projects retrieved successfully
        '401':
          description: Unauthorized
  /api/projects/{id}:
    get:
      summary: Get project by ID
      description: Retrieve a specific project by its ID
      tags:
        - Projects
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Project ID
      responses:
        '200':
          description: Project retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Project not found
    put:
      summary: Update project
      description: Update project name or description
      tags:
        - Projects
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Project ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                description:
                  type: string
                  maxLength: 500
      responses:
        '200':
          description: Project updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Project not found
    delete:
      summary: Delete project
      description: Delete project and all associated meetings and transcriptions
      tags:
        - Projects
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Project ID
      responses:
        '200':
          description: Project deleted successfully
        '401':
          description: Unauthorized
        '404':
          description: Project not found
  /api/projects/{id}/stats:
    get:
      summary: Get project statistics
      description: Retrieve meeting count and other statistics for a project
      tags:
        - Projects
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Project ID
      responses:
        '200':
          description: Statistics retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Project not found
  /api/meetings/{meetingId}/transcriptions/status:
    get:
      summary: Get transcription status
      description: Get real-time transcription progress for polling
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
      responses:
        '200':
          description: Status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                        enum:
                          - pending
                          - processing
                          - completed
                          - failed
                      progress:
                        type: number
                        minimum: 0
                        maximum: 100
                      processedSegments:
                        type: number
                      estimatedTotal:
                        type: number
                      elapsedTime:
                        type: number
                        description: Elapsed time in milliseconds
                      estimatedRemaining:
                        type: number
                        description: Estimated remaining time in milliseconds
                      errorMessage:
                        type: string
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/meetings/{meetingId}/transcriptions/hybrid-search:
    get:
      summary: Hybrid search transcriptions
      description: >-
        Two-stage retrieval combining vector search and full-text search. Stage 1 uses semantic similarity to find
        relevant candidates, Stage 2 reranks with keyword matching for optimal results.
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: query
          name: q
          required: true
          schema:
            type: string
            maxLength: 200
          description: Search query (supports multi-word and multi-language queries)
        - in: query
          name: scoreThreshold
          schema:
            type: number
            minimum: 0
            maximum: 1
            default: 0.7
          description: Minimum combined similarity score (0-1)
        - in: query
          name: personId
          schema:
            type: string
          description: Filter by person ID
      responses:
        '200':
          description: Hybrid search results retrieved successfully with combined scores
        '400':
          description: Invalid search query
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/meetings/{meetingId}/transcriptions/person/{personId}:
    get:
      summary: Get transcriptions by person
      description: Filter transcriptions by person ID
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: personId
          required: true
          schema:
            type: string
          description: Person ID
      responses:
        '200':
          description: Person transcriptions retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/meetings/{meetingId}/transcriptions:
    get:
      summary: Get all transcriptions for a meeting
      description: Retrieve paginated list of transcription segments
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
            maximum: 100
        - in: query
          name: sort
          schema:
            type: string
            default: startTime
      responses:
        '200':
          description: Transcriptions retrieved successfully
        '400':
          description: Invalid pagination parameters
        '401':
          description: Unauthorized
        '404':
          description: Meeting not found
  /api/meetings/{meetingId}/transcriptions/{id}:
    get:
      summary: Get transcription by ID
      description: Retrieve a specific transcription segment
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Transcription ID
      responses:
        '200':
          description: Transcription retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: Transcription not found
    patch:
      summary: Update transcription (partial update)
      description: Partially update transcription speaker name or text content. Only provided fields will be updated.
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Transcription ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                speaker:
                  type: string
                  maxLength: 100
                  example: John Doe
                text:
                  type: string
                  maxLength: 5000
                  example: We need to prioritize the authentication feature
      responses:
        '200':
          description: Transcription updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Transcription not found
    put:
      summary: Update transcription (deprecated - use PATCH)
      description: >
        **DEPRECATED**: Please use PATCH instead for partial updates.


        Edit transcription speaker name or text content. This endpoint implements partial update semantics but will be
        removed in v2.0.
      deprecated: true
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Transcription ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                speaker:
                  type: string
                  maxLength: 100
                  example: John Doe
                text:
                  type: string
                  maxLength: 5000
                  example: We need to prioritize the authentication feature
      responses:
        '200':
          description: Transcription updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Transcription not found
    delete:
      summary: Delete transcription
      description: Delete a specific transcription segment
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Transcription ID
      responses:
        '200':
          description: Transcription deleted successfully
        '401':
          description: Unauthorized
        '404':
          description: Transcription not found
  /api/meetings/{meetingId}/transcriptions/speaker/{speaker}/assign:
    put:
      summary: Batch assign speaker to person
      description: Assign all transcriptions with a specific speaker name to a person
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: speaker
          required: true
          schema:
            type: string
          description: Speaker name to assign (e.g., "Speaker 1")
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - personId
              properties:
                personId:
                  type: string
                  description: Person ID to assign the speaker to
                  example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: Speaker assigned successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      matchedCount:
                        type: number
                        description: Number of transcriptions matched
                      modifiedCount:
                        type: number
                        description: Number of transcriptions updated
                      speaker:
                        type: string
                        description: Original speaker name
                      assignedTo:
                        type: object
                        properties:
                          personId:
                            type: string
                          personName:
                            type: string
                  message:
                    type: string
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Meeting or person not found
  /api/meetings/{meetingId}/transcriptions/people/{personId}/assign:
    put:
      summary: Reassign person's transcriptions to another person
      description: Reassign all transcriptions currently assigned to a person to a different person
      tags:
        - Transcriptions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: meetingId
          required: true
          schema:
            type: string
          description: Meeting ID
        - in: path
          name: personId
          required: true
          schema:
            type: string
          description: Current person ID whose transcriptions will be reassigned
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - newPersonId
              properties:
                newPersonId:
                  type: string
                  description: New person ID to reassign transcriptions to
                  example: 507f1f77bcf86cd799439012
      responses:
        '200':
          description: Transcriptions reassigned successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      matchedCount:
                        type: number
                        description: Number of transcriptions matched
                      modifiedCount:
                        type: number
                        description: Number of transcriptions updated
                      from:
                        type: object
                        properties:
                          personId:
                            type: string
                          personName:
                            type: string
                      to:
                        type: object
                        properties:
                          personId:
                            type: string
                          personName:
                            type: string
                  message:
                    type: string
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Meeting or person not found
  /api/users:
    get:
      summary: Get all users
      description: Retrieve a list of all users in the system
      tags:
        - Users
      responses:
        '200':
          description: List of users
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
    post:
      summary: Create new user
      description: Create a new user with email and name
      tags:
        - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - name
              properties:
                email:
                  type: string
                  format: email
                  description: User's email address (must be unique)
                  example: john.doe@example.com
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  description: User's full name
                  example: John Doe
                status:
                  type: string
                  enum:
                    - active
                    - inactive
                    - suspended
                  description: User account status
                  example: active
      responses:
        '201':
          description: User created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'
        '400':
          description: Validation error or duplicate email
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/users/me:
    get:
      summary: Get current authenticated user's profile
      description: Returns the profile of the currently authenticated user
      tags:
        - Users
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Current user profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized - authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/users/{id}:
    get:
      summary: Get user by ID
      description: Retrieve a single user by their unique ID
      tags:
        - Users
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: User ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: User details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'
        '400':
          description: Invalid user ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      summary: Update user
      description: Update an existing user's information
      tags:
        - Users
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: User ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: User's email address
                  example: john.updated@example.com
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  description: User's full name
                  example: John Updated
                status:
                  type: string
                  enum:
                    - active
                    - inactive
                    - suspended
                  description: User account status
                  example: active
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'
        '400':
          description: Validation error or invalid ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      summary: Delete user
      description: Delete a user from the system
      tags:
        - Users
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: User ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      responses:
        '200':
          description: User deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User deleted successfully
        '400':
          description: Invalid user ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/users/{id}/avatar:
    post:
      summary: Upload user avatar
      description: Upload an avatar image for a user (max 5MB)
      tags:
        - Users
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: User ID (MongoDB ObjectId)
          example: 507f1f77bcf86cd799439011
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - avatar
              properties:
                avatar:
                  type: string
                  format: binary
                  description: Avatar image file (max 5MB)
      responses:
        '200':
          description: Avatar uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'
        '400':
          description: Validation error or file too large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /api/users/me/usage:
    get:
      summary: Get current user's monthly usage statistics
      description: Retrieve usage statistics (total meeting duration) for the authenticated user for a specific month
      tags:
        - Users
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: year
          schema:
            type: integer
          description: Year (defaults to current year)
          example: 2025
        - in: query
          name: month
          schema:
            type: integer
            minimum: 1
            maximum: 12
          description: Month (1-12, defaults to current month)
          example: 1
      responses:
        '200':
          description: Usage statistics retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      userId:
                        type: string
                        example: 507f1f77bcf86cd799439011
                      year:
                        type: integer
                        example: 2025
                      month:
                        type: integer
                        example: 1
                      totalDurationSeconds:
                        type: number
                        example: 3600
                      totalDurationMinutes:
                        type: number
                        example: 60
                      totalDurationHours:
                        type: string
                        example: '1.00'
                      meetingCount:
                        type: integer
                        example: 5
                      period:
                        type: object
                        properties:
                          start:
                            type: string
                            format: date-time
                          end:
                            type: string
                            format: date-time
        '400':
          description: Invalid query parameters
        '401':
          description: Unauthorized
  /api/users/{userId}/meetings:
    get:
      summary: Get user's recent meetings
      description: Retrieve paginated list of meetings for a user across all their projects
      tags:
        - Users
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: string
          description: User ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 5
        - in: query
          name: sort
          schema:
            type: string
            default: '-createdAt'
      responses:
        '200':
          description: User meetings retrieved successfully
        '401':
          description: Unauthorized
        '404':
          description: User not found
  /api/users/{userId}/action-items:
    get:
      summary: Get user's action items
      description: Retrieve paginated list of all action items for a user across all their meetings
      tags:
        - Users
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: string
          description: User ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
          description: Items per page
        - in: query
          name: sort
          schema:
            type: string
            default: createdAt
          description: Sort field
      responses:
        '200':
          description: User action items retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  actionItems:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        meetingId:
                          type: object
                          properties:
                            _id:
                              type: string
                            title:
                              type: string
                            projectId:
                              type: string
                        userId:
                          type: string
                        personId:
                          type: object
                          nullable: true
                          properties:
                            _id:
                              type: string
                            name:
                              type: string
                            email:
                              type: string
                            company:
                              type: string
                        task:
                          type: string
                        assignee:
                          type: string
                          nullable: true
                        dueDate:
                          type: string
                          nullable: true
                        context:
                          type: string
                          nullable: true
                        status:
                          type: string
                          enum:
                            - pending
                            - in_progress
                            - completed
                        createdAt:
                          type: string
                          format: date-time
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                      limit:
                        type: integer
                      total:
                        type: integer
                      pages:
                        type: integer
        '401':
          description: Unauthorized
        '404':
          description: User not found
  /auth/signup:
    post:
      summary: Register a new user
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
                  minLength: 6
                name:
                  type: string
                  minLength: 2
      responses:
        '201':
          description: User registered successfully
        '400':
          description: Validation error
        '409':
          description: User already exists
  /auth/login:
    post:
      summary: Login with email and password
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
      responses:
        '200':
          description: Login successful
        '401':
          description: Invalid credentials
  /auth/me:
    get:
      summary: Get current user profile
      tags:
        - Auth
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User profile
        '401':
          description: Unauthorized
  /auth/google/token:
    post:
      summary: Verify Google OAuth tokens and return JWT (Chrome Extension)
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - idToken
                - accessToken
              properties:
                idToken:
                  type: string
                  description: Google ID token from chrome.identity.getAuthToken()
                accessToken:
                  type: string
                  description: Google access token from chrome.identity.getAuthToken()
      responses:
        '200':
          description: Authentication successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  jwt:
                    type: string
                    description: Backend JWT token
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                      name:
                        type: string
                      picture:
                        type: string
        '400':
          description: Missing required tokens
        '401':
          description: Invalid tokens
  /auth/refresh:
    post:
      summary: Refresh access token using refresh token
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  description: Valid refresh token
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                      accessToken:
                        type: string
                      refreshToken:
                        type: string
                      expiresIn:
                        type: number
        '400':
          description: Missing refresh token
        '401':
          description: Invalid or expired refresh token
  /auth/logout:
    post:
      summary: Logout and revoke refresh token
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  description: Refresh token to revoke
      responses:
        '200':
          description: Logout successful
        '400':
          description: Missing refresh token
